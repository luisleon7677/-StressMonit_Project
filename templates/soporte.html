{% extends "base.html" %}

{% block content %}
<div class="soporte-container" style="max-width: 900px; margin: 0 auto;">
  <div class="titulo-principal mb-5">
    <h1 class="h3 fw-bold d-flex align-items-center gap-2">
      <span class="material-symbols-outlined text-primary" style="font-size: 2.5rem;">support_agent</span>
      Centro de Ayuda y Soporte
    </h1>
    <p class="text-muted">Encuentra respuestas rápidas o contacta con nuestro equipo técnico.</p>
  </div>

  <div class="row g-4">
    <!-- FAQ Section -->
    <div class="col-12">
      <div class="card-custom border-0 shadow-sm p-4">
        <h5 class="fw-bold mb-4 d-flex align-items-center gap-2">
          <span class="material-symbols-outlined">quiz</span>
          Preguntas Frecuentes
        </h5>

        <div class="accordion accordion-flush" id="accordionExample">
          <div class="accordion-item border-bottom">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed fw-medium" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                ¿Qué factores pueden causar estrés en el ambiente laboral?
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
              <div class="accordion-body text-muted small">
                El estrés en el trabajo puede ser causado por una variedad de factores, como una carga de trabajo
                excesiva, plazos ajustados, falta de apoyo por parte de los superiores, conflictos interpersonales,
                expectativas poco claras, la falta de control sobre las tareas y un ambiente laboral poco saludable o
                tóxico.
              </div>
            </div>
          </div>

          <div class="accordion-item border-bottom">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed fw-medium" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                ¿Cómo puedo identificar si estoy experimentando estrés empresarial?
              </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
              <div class="accordion-body text-muted small">
                El estrés laboral puede manifestarse de muchas maneras, tanto físicas como emocionales. Los síntomas
                físicos incluyen dolores de cabeza, fatiga, insomnio, dolores musculares o problemas digestivos. A nivel
                emocional, se pueden experimentar sentimientos de ansiedad, frustración o agotamiento.
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed fw-medium" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                ¿Qué estrategias se pueden implementar para reducir el estrés en el trabajo?
              </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
              <div class="accordion-body text-muted small">
                Gestionar el tiempo de manera eficiente, delegar tareas, practicar técnicas de relajación como la
                meditación, y asegurar una carga de trabajo equilibrada pueden ser medidas clave para reducir el estrés
                generalizado.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Ticket Creation Section -->
    <div class="col-12">
      <div class="card-custom border-0 shadow-sm p-4">
        <h5 class="fw-bold mb-4 d-flex align-items-center gap-2">
          <span class="material-symbols-outlined">confirmation_number</span>
          Creación de Ticket de Soporte
        </h5>

        <div id="mensajeConfirmacion" class="alert alert-success d-none mb-4" role="alert">
          <div class="d-flex align-items-center gap-2">
            <span class="material-symbols-outlined">check_circle</span>
            ¡Tu solicitud ha sido enviada con éxito! Nos contactaremos pronto.
          </div>
        </div>

        <form class="needs-validation" novalidate>
          <div class="mb-4">
            <label for="asunto" class="form-label fw-semibold">Asunto del Problema</label>
            <input type="text" class="form-control bg-light border-0 px-3 py-2" id="asunto"
              placeholder="Breve descripción del problema" maxlength="100" required>
            <div class="form-text mt-1 small">Máximo 100 caracteres.</div>
            <div class="invalid-feedback">Por favor ingresa un asunto.</div>
          </div>

          <div class="mb-4">
            <label for="detalle" class="form-label fw-semibold">Detalle del Reporte</label>
            <textarea class="form-control bg-light border-0 px-3 py-2" id="detalle" rows="6" maxlength="1200"
              placeholder="Describe lo que sucede con el mayor detalle posible..." required></textarea>
            <div class="form-text mt-1 small">Máximo 1200 caracteres (aprox. 200 palabras).</div>
            <div class="invalid-feedback">El detalle es obligatorio para poder ayudarte.</div>
          </div>

          <div class="d-flex justify-content-end mt-5 pt-3 border-top">
            <button type="submit" class="btn-primary-custom px-5">
              <span class="material-symbols-outlined">send</span>
              Enviar Ticket
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  (() => {
    'use strict';
    const forms = document.querySelectorAll('.needs-validation');
    const mensaje = document.getElementById('mensajeConfirmacion');

    Array.from(forms).forEach(form => {
      form.addEventListener('submit', event => {
        event.preventDefault();
        if (!form.checkValidity()) {
          event.stopPropagation();
          form.classList.add('was-validated');
          return;
        }

        form.classList.add('was-validated');
        mensaje.classList.remove('d-none');

        setTimeout(() => {
          mensaje.classList.add('d-none');
          form.reset();
          form.classList.remove('was-validated');
        }, 3000);
      }, false);
    });
  })();
</script>
{% endblock %}